function createCalendar(e){document.open(),gmonth=e,reservations.push(reservation1),reservations.push(reservation2),reservations.push(reservation3);var t=new Date(2015,e,1),a=t.getDay();if(0===a){a=6;var n=0}else var n=1;var r=maxDaysInMonth(e,2015),s=maxDaysInMonth(e-1,2015),o="";o+='<div class="col-sm-3" id="hd">',o+=' <div class="panel panel-default" style="text-align:center"><span class="glyphicon glyphicon-chevron-left" id="prev"></span><span class="text-center" id="dateLabel">'+Month[e]+" "+t.getFullYear()+'</span><span class="glyphicon glyphicon-chevron-right" id="next"></span>',o+='<table class="table" id="calendarTable">',o+="<thead>",o+="<tr>";for(var i=0;7>i;i++)o+="<th >"+Day[i]+"</th>";o+="</tr>",o+="</thead>",o+="<tbody>";for(var c=!1,l=!1,d=0;6>d;d++){o+="<tr>";for(var i=0;7>i;i++){l=!1,n++;var h=n-a;if(0>=h)h+=s,o+='<td class="outOfMonth">'+h+"</td>";else if(h===r){n=0,a=0;for(var v=0;v<reservations.length;v++)dateCheck=new Date(2015,e,h),dates.inRange(dateCheck,reservations[v].dateFrom,reservations[v].dateTo)&&(l=!0);o+=l?'<td class="strikethrough">'+h+"</td>":"<td>"+h+"</td>",c=!0}else if(c)o+='<td class="outOfMonth">'+h+"</td>";else{for(var v=0;v<reservations.length;v++)dateCheck=new Date(2015,e,h),dates.inRange(dateCheck,reservations[v].dateFrom,reservations[v].dateTo)&&(l=!0);o+=l?'<td class="strikethrough">'+h+"</td>":"<td>"+h+"</td>"}}o+="</tr>"}o+="</tbody>",o+="</table>",o+="</div>",o+="</div>",$(document).on("click","#next",function(e){switchDate(!0)}),$(document).on("click","#prev",function(e){switchDate(!1)}),document.write(o),document.close()}function maxDaysInMonth(e,t){var a;return 3===e||5===e||8===e||10===e?a=30:(a=31,1===e&&(a=t/4-parseInt(t/4)!==0?28:29)),a}function switchDate(e){e===!0?gmonth+=1:e===!1&&(gmonth-=1),12===gmonth&&(gmonth=0,year+=1),0>gmonth&&(gmonth=11,year-=1);var t=new Date(year,gmonth,1),a=t.getDay();if(0===a){a=6;var n=0}else var n=1;var r=maxDaysInMonth(gmonth,year),s=maxDaysInMonth(gmonth-1,year),o=document.getElementById("calendarTable");document.getElementById("dateLabel").innerHTML=Month[gmonth]+" "+year;for(var i=!1,c=!1,l=1;7>l;l++){i=!1;for(var d=0;7>d;d++){i=!1,n++;var h=n-a;if(0>=h)h=s+h,o.rows[l].cells[d].innerHTML=h,o.rows[l].cells[d].className="outOfMonth";else if(h===r){n=0,a=0;for(var v=0;v<reservations.length;v++)dateCheck=new Date(year,gmonth,h),dates.inRange(dateCheck,reservations[v].dateFrom,reservations[v].dateTo)&&(i=!0);o.rows[l].cells[d].innerHTML=h,i?o.rows[l].cells[d].className="strikethrough":o.rows[l].cells[d].className="inMonth",c=!0}else if(c)o.rows[l].cells[d].innerHTML=h,o.rows[l].cells[d].className="outOfMonth";else{for(var v=0;v<reservations.length;v++)dateCheck=new Date(year,gmonth,h),dates.inRange(dateCheck,reservations[v].dateFrom,reservations[v].dateTo)&&(i=!0);o.rows[l].cells[d].innerHTML=h,i?o.rows[l].cells[d].className="strikethrough":o.rows[l].cells[d].className="inMonth"}}}}function _Reservation(e,t){this.dateFrom=e,this.dateTo=t}function dateChanged(e){setInterval(function(){track_change()},100)}function track_change(){if($("#mdatepicker").val()!==oldValue){oldValue=$("#mdatepicker").val();var e=$("#mdatepicker").val().substr(2)+$("#mdatepicker").val().substr(0,2);e=e.substr(1),e=e.slice(0,4)+"-"+e.slice(4),e+="-01";var t=new Date(e);gmonth=t.getMonth(),year=t.getFullYear(),switchDate()}}var gmonth=7,day,year=2015,reservations=[],reservation1=new _Reservation(new Date(2015,7,12),new Date(2015,7,19)),reservation2=new _Reservation(new Date(2015,8,3),new Date(2015,8,6)),reservation3=new _Reservation(new Date(2015,2,3),new Date(2015,3,9)),Month=new Array("Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"),Day=new Array("Pn","Wt","Śr","Cz","Pt","S","N"),dates={convert:function(e){return e.constructor===Date?e:e.constructor===Array?new Date(e[0],e[1],e[2]):e.constructor===Number?new Date(e):e.constructor===String?new Date(e):"object"==typeof e?new Date(e.year,e.month,e.date):NaN},compare:function(e,t){return isFinite(e=this.convert(e).valueOf())&&isFinite(t=this.convert(t).valueOf())?(e>t)-(t>e):NaN},inRange:function(e,t,a){return isFinite(e=this.convert(e).valueOf())&&isFinite(t=this.convert(t).valueOf())&&isFinite(a=this.convert(a).valueOf())?e>=t&&a>=e:NaN}};$(document).ready(function(){$("#mdatepicker").datepicker({format:"mm-yyyy",viewMode:"months",minViewMode:"months"}).change(dateChanged).on("changeDate",dateChanged)}),$(document).on("click","#calendarIcon",function(e){$("#mdatepicker").datepicker("show")});var oldValue=$("#mdatepicker").val();